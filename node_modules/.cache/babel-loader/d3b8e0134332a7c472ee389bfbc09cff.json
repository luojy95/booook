{"ast":null,"code":"import _toConsumableArray from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/zecheng3/workspace/cs498rk/rk_project/front-end/src/components/Detailed/index.js\";\nimport React from 'react';\nimport { ButtonGroup, Button, Container, Card, Icon, Image } from 'semantic-ui-react';\nimport Image1 from '../Landing/image/img1.png';\nimport './Detailed.scss';\nimport axios from 'axios';\n\nvar Detailed =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Detailed, _React$Component);\n\n  function Detailed() {\n    var _this;\n\n    _classCallCheck(this, Detailed);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Detailed).call(this));\n\n    _this.handleItemClick = function (e, _ref) {\n      var name = _ref.name;\n\n      _this.setState({\n        activeItem: name\n      }); // console.log(\"Parent page state: \", this.state.activeItem)\n\n    };\n\n    _this.state = {\n      activeItem: 'General',\n      price: 0,\n      title: '',\n      college: '',\n      description: '',\n      assignedUser: '',\n      owner: '',\n      watchedUser: 0,\n      picture: ''\n    };\n    _this.buyClickHandler = _this.buyClickHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Detailed, [{\n    key: \"buyClickHandler\",\n    value: function buyClickHandler() {\n      axios.delete('http://localhost:8000/api/books/' + this.props.match.params.id).then(function () {\n        window.location.href = 'http://localhost:3000';\n      });\n    }\n  }, {\n    key: \"watchClickHandler\",\n    value: function watchClickHandler() {\n      axios.get('http://localhost:8000/api/books' + this.props.match.params.id).then(function (res) {\n        var temp = res.data.data;\n        temp.watchedUsers = new Set(temp.watchedUsers);\n        temp.watchedUsers.add(window.sessionStorage.getItem('userId'));\n        temp.watchedUsers = _toConsumableArray(temp.watchedUsers);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(this.props);\n      axios.get('http://localhost:8000/api/books/' + this.props.match.params.id).then(function (res) {\n        _this2.setState({\n          price: res.data.data.price,\n          title: res.data.data.title,\n          college: res.data.data.college,\n          description: res.data.data.description,\n          watchedUser: res.data.data.watchedUsers.length,\n          picture: res.data.data.picture\n        });\n\n        console.log(res.data.data);\n        axios.get('http://localhost:8000/api/users/' + res.data.data.assignedUser).then(function (res2) {\n          _this2.setState({\n            owner: res2.data.data.name\n          });\n\n          console.log(_this2.state.owner);\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Container, {\n        textAlign: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Card, {\n        id: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Image, {\n        src: this.state.picture,\n        size: \"massive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, this.state.title), React.createElement(Card.Meta, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Price: $\", this.state.price)), React.createElement(Card.Meta, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"owner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Owner: \", this.state.owner)), React.createElement(Card.Description, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, this.state.description)), React.createElement(Card.Content, {\n        extra: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), this.state.watchedUser, \" Others want to purchase\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(ButtonGroup, {\n        \"aria-label\": \"Basic example\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.buyClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Watch this item!\"), React.createElement(\"div\", {\n        class: \"or\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(Button, {\n        onClick: this.buyClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Unwatch this item!\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(Button, {\n        onClick: this.buyClickHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"BUY with one click!\")));\n    }\n  }]);\n\n  return Detailed;\n}(React.Component);\n\n;\nexport default Detailed;","map":{"version":3,"sources":["/home/zecheng3/workspace/cs498rk/rk_project/front-end/src/components/Detailed/index.js"],"names":["React","ButtonGroup","Button","Container","Card","Icon","Image","Image1","axios","Detailed","handleItemClick","e","name","setState","activeItem","state","price","title","college","description","assignedUser","owner","watchedUser","picture","buyClickHandler","bind","delete","props","match","params","id","then","window","location","href","get","res","temp","data","watchedUsers","Set","add","sessionStorage","getItem","console","log","length","res2","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {ButtonGroup, Button, Container, Card, Icon, Image } from 'semantic-ui-react';\nimport Image1 from '../Landing/image/img1.png';\nimport './Detailed.scss';\nimport axios from 'axios'\n\n\nclass Detailed extends React.Component {\n\n    constructor(){\n        super();\n        this.state = {\n        activeItem: 'General',\n        price: 0,\n        title: '',\n        college: '',\n        description: '',\n        assignedUser: '',\n        owner: '',\n        watchedUser: 0,\n        picture: ''\n    };\n    this.buyClickHandler = this.buyClickHandler.bind(this);\n    }\n\n    buyClickHandler() {\n        axios.delete('http://localhost:8000/api/books/' + this.props.match.params.id).then(() => {\n            window.location.href = 'http://localhost:3000';\n        })\n    }\n\n    watchClickHandler() {\n        axios.get('http://localhost:8000/api/books' + this.props.match.params.id).then((res) => {\n            var temp = res.data.data;\n            temp.watchedUsers = new Set(temp.watchedUsers);\n            temp.watchedUsers.add(window.sessionStorage.getItem('userId'));\n            temp.watchedUsers = [...temp.watchedUsers];\n        })\n    }\n\n\thandleItemClick = (e, { name }) => {\n\t\tthis.setState({ activeItem: name })\n\t\t// console.log(\"Parent page state: \", this.state.activeItem)\n\t}\n\n    componentDidMount() {\n        console.log(this.props)\n        axios.get('http://localhost:8000/api/books/' + this.props.match.params.id).then((res) => {\n            this.setState({\n                price: res.data.data.price,\n                title: res.data.data.title,\n                college: res.data.data.college,\n                description: res.data.data.description,\n                watchedUser: res.data.data.watchedUsers.length,\n                picture: res.data.data.picture\n            });\n            console.log(res.data.data)\n            axios.get('http://localhost:8000/api/users/' + res.data.data.assignedUser).then((res2) => {\n                this.setState({\n                    owner: res2.data.data.name\n                })\n                console.log(this.state.owner);\n            })\n        })\n    }\n\n\trender(){\n\t\treturn (\n\t\t\t<div>\n                <Container textAlign='center'>\n                <Card id='card'>\n                    <Image src={this.state.picture} size='massive' />\n                    <Card.Content>\n                    <Card.Header>{this.state.title}</Card.Header>\n                    <Card.Meta>\n                        <span className='price'>Price: ${this.state.price}</span>\n                    </Card.Meta>\n                    <Card.Meta>\n                        <span className='owner'>Owner: {this.state.owner}</span>\n                    </Card.Meta>\n                    <Card.Description>{this.state.description}</Card.Description>\n                    </Card.Content>\n                    <Card.Content extra>\n                    <a>\n                        <Icon name='user' />\n                        {this.state.watchedUser} Others want to purchase\n                    </a>\n                    </Card.Content>\n                </Card>\n                <br/>\n                <ButtonGroup aria-label=\"Basic example\">\n                <Button onClick={this.buyClickHandler}>\n                 Watch this item!\n                </Button>\n                 <div class=\"or\"></div>\n                <Button onClick={this.buyClickHandler}>\n                 Unwatch this item!\n                </Button>\n                </ButtonGroup>\n                <br/>\n                <br/>\n                <Button onClick={this.buyClickHandler}>\n                 BUY with one click!\n                </Button>\n                </Container>\n\t\t\t</div>\n\t\t)\n\t}\n\t\n};\n\nexport default Detailed;"]},"metadata":{},"sourceType":"module"}