{"ast":null,"code":"import _classCallCheck from \"/home/qingyu/Desktop/react-firebase-demo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport app from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nvar config = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID\n};\n\nvar Firebase = function Firebase() {\n  var _this = this;\n\n  _classCallCheck(this, Firebase);\n\n  this.doCreateUserWithEmailAndPassword = function (email, password) {\n    return _this.auth.createUserWithEmailAndPassword(email, password);\n  };\n\n  this.doSignInWithEmailAndPassword = function (email, password) {\n    return _this.auth.signInWithEmailAndPassword(email, password);\n  };\n\n  this.doSignInWithGoogle = function () {\n    return _this.auth.signInWithPopup(_this.googleProvider);\n  };\n\n  this.doSignOut = function () {\n    return _this.auth.signOut();\n  };\n\n  this.doPasswordReset = function (email) {\n    return _this.auth.sendPasswordResetEmail(email);\n  };\n\n  this.doSendEmailVerification = function () {\n    return _this.auth.currentUser.sendEmailVerification({\n      url: process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT\n    });\n  };\n\n  this.doPasswordUpdate = function (password) {\n    return _this.auth.currentUser.updatePassword(password);\n  };\n\n  this.user = function (uid) {\n    return _this.db.ref(\"users/\".concat(uid));\n  };\n\n  this.users = function () {\n    return _this.db.ref('users');\n  };\n\n  this.message = function (uid) {\n    return _this.db.ref(\"messages/\".concat(uid));\n  };\n\n  this.messages = function () {\n    return _this.db.ref('messages');\n  };\n\n  app.initializeApp(config);\n  /* Helper */\n\n  this.serverValue = app.database.ServerValue;\n  this.emailAuthProvider = app.auth.EmailAuthProvider;\n  /* Firebase APIs */\n\n  this.auth = app.auth();\n  this.db = app.database();\n  /* Social Sign In Method Provider */\n\n  this.googleProvider = new app.auth.GoogleAuthProvider();\n} // *** Auth API ***\n;\n\nexport default Firebase;","map":{"version":3,"sources":["/home/qingyu/Desktop/react-firebase-demo/src/components/Firebase/firebase.js"],"names":["app","config","apiKey","process","env","REACT_APP_API_KEY","authDomain","REACT_APP_AUTH_DOMAIN","databaseURL","REACT_APP_DATABASE_URL","projectId","REACT_APP_PROJECT_ID","storageBucket","REACT_APP_STORAGE_BUCKET","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","Firebase","doCreateUserWithEmailAndPassword","email","password","auth","createUserWithEmailAndPassword","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSignInWithGoogle","signInWithPopup","googleProvider","doSignOut","signOut","doPasswordReset","sendPasswordResetEmail","doSendEmailVerification","currentUser","sendEmailVerification","url","REACT_APP_CONFIRMATION_EMAIL_REDIRECT","doPasswordUpdate","updatePassword","user","uid","db","ref","users","message","messages","initializeApp","serverValue","database","ServerValue","emailAuthProvider","EmailAuthProvider","GoogleAuthProvider"],"mappings":"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","sourcesContent":["import app from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\nconst config = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n};\n\nclass Firebase {\n  constructor() {\n    app.initializeApp(config);\n\n    /* Helper */\n\n    this.serverValue = app.database.ServerValue;\n    this.emailAuthProvider = app.auth.EmailAuthProvider;\n\n    /* Firebase APIs */\n\n    this.auth = app.auth();\n    this.db = app.database();\n\n    /* Social Sign In Method Provider */\n\n    this.googleProvider = new app.auth.GoogleAuthProvider();\n  }\n\n  // *** Auth API ***\n\n  doCreateUserWithEmailAndPassword = (email, password) =>\n    this.auth.createUserWithEmailAndPassword(email, password);\n\n  doSignInWithEmailAndPassword = (email, password) =>\n    this.auth.signInWithEmailAndPassword(email, password);\n\n  doSignInWithGoogle = () =>\n    this.auth.signInWithPopup(this.googleProvider);\n\n  doSignOut = () => this.auth.signOut();\n\n  doPasswordReset = email => this.auth.sendPasswordResetEmail(email);\n\n  doSendEmailVerification = () =>\n    this.auth.currentUser.sendEmailVerification({\n      url: process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT,\n    });\n\n  doPasswordUpdate = password =>\n    this.auth.currentUser.updatePassword(password);\n\n  // *** Merge Auth and DB User API *** //\n\n  // onAuthUserListener = (next, fallback) =>\n  //   this.auth.onAuthStateChanged(authUser => {\n  //     if (authUser) {\n  //       this.user(authUser.uid)\n  //         .once('value')\n  //         .then(snapshot => {\n  //           const dbUser = snapshot.val();\n\n  //           // default empty roles\n  //           if (!dbUser.roles) {\n  //             dbUser.roles = {};\n  //           }\n\n  //           // merge auth and db user\n  //           authUser = {\n  //             uid: authUser.uid,\n  //             email: authUser.email,\n  //             emailVerified: authUser.emailVerified,\n  //             providerData: authUser.providerData,\n  //             ...dbUser,\n  //           };\n\n  //           next(authUser);\n  //         });\n  //     } else {\n  //       fallback();\n  //     }\n  //   });\n\n  // *** User API ***\n\n  user = uid => this.db.ref(`users/${uid}`);\n\n  users = () => this.db.ref('users');\n\n  // *** Message API ***\n\n  message = uid => this.db.ref(`messages/${uid}`);\n\n  messages = () => this.db.ref('messages');\n}\n\nexport default Firebase;\n"]},"metadata":{},"sourceType":"module"}