{"ast":null,"code":"import _defineProperty from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/zecheng3/workspace/cs498rk/rk_project/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/zecheng3/workspace/cs498rk/rk_project/src/components/SignUp/index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { Form, Button } from 'semantic-ui-react';\nimport './signup.scss';\nimport axios from 'axios';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\nimport * as URL from '../../constants/url';\n\nvar SignUpPage = function SignUpPage() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, React.createElement(SignUpForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }));\n};\n\nvar INITIAL_STATE = {\n  username: '',\n  email: '',\n  passwordOne: '',\n  passwordTwo: '',\n  isAdmin: false,\n  error: null\n};\nvar ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\nvar ERROR_MSG_ACCOUNT_EXISTS = \"\\n  An account with this E-Mail address already exists.\\n  Try to login with this account instead. If you think the\\n  account is already used from one of the social logins, try\\n  to sign in with one of them. Afterward, associate your accounts\\n  on your personal account page.\\n\";\n\nvar SignUpFormBase =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUpFormBase, _Component);\n\n  function SignUpFormBase(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpFormBase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUpFormBase).call(this, props));\n\n    _this.onSubmit = function (event) {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          passwordOne = _this$state.passwordOne,\n          isAdmin = _this$state.isAdmin;\n      var roles = {};\n      axios.post(URL.url + '/api/users', {\n        name: username,\n        email: email,\n        password: passwordOne\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n\n      _this.props.firebase.doCreateUserWithEmailAndPassword(email, passwordOne).then(function (authUser) {\n        // Create a user in your Firebase realtime database\n        return _this.props.firebase.user(authUser.user.uid).set({\n          username: username,\n          email: email,\n          roles: roles\n        });\n      }).then(function () {\n        return _this.props.firebase.doSendEmailVerification();\n      }).then(function () {\n        _this.setState(_objectSpread({}, INITIAL_STATE));\n\n        _this.props.history.push(\"/\");\n      }).catch(function (error) {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        _this.setState({\n          error: error\n        });\n      });\n\n      event.preventDefault();\n    };\n\n    _this.onChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.state = _objectSpread({}, INITIAL_STATE);\n    return _this;\n  }\n\n  _createClass(SignUpFormBase, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          passwordOne = _this$state2.passwordOne,\n          passwordTwo = _this$state2.passwordTwo,\n          isAdmin = _this$state2.isAdmin,\n          error = _this$state2.error;\n      var isInvalid = passwordOne !== passwordTwo || passwordOne === '' || email === '' || username === '';\n      return React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        class: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"SignUp\"), React.createElement(\"input\", {\n        name: \"username\",\n        value: username,\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: \"Full Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"email\",\n        value: email,\n        onChange: this.onChange,\n        type: \"text\",\n        placeholder: \"Email Address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"passwordOne\",\n        value: passwordOne,\n        onChange: this.onChange,\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"passwordTwo\",\n        value: passwordTwo,\n        onChange: this.onChange,\n        type: \"password\",\n        placeholder: \"Confirm Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(Button, {\n        disabled: isInvalid,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Sign Up\"));\n    }\n  }]);\n\n  return SignUpFormBase;\n}(Component);\n\nvar SignUpLink = function SignUpLink() {\n  return React.createElement(\"div\", {\n    class: \"forget\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(Link, {\n    to: ROUTES.SIGN_UP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Sign Up\"));\n};\n\nvar SignUpForm = compose(withRouter, withFirebase)(SignUpFormBase);\nexport default SignUpPage;\nexport { SignUpForm, SignUpLink };","map":{"version":3,"sources":["/home/zecheng3/workspace/cs498rk/rk_project/src/components/SignUp/index.js"],"names":["React","Component","Link","withRouter","compose","Form","Button","axios","withFirebase","ROUTES","ROLES","URL","SignUpPage","INITIAL_STATE","username","email","passwordOne","passwordTwo","isAdmin","error","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","SignUpFormBase","props","onSubmit","event","state","roles","post","url","name","password","then","response","console","log","catch","firebase","doCreateUserWithEmailAndPassword","authUser","user","uid","set","doSendEmailVerification","setState","history","push","code","message","preventDefault","onChange","target","value","isInvalid","SignUpLink","SIGN_UP","SignUpForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { Form, Button } from 'semantic-ui-react'\nimport './signup.scss';\nimport axios from 'axios';\n\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\nimport * as URL from '../../constants/url'\n\nconst SignUpPage = () => (\n  <div>\n\t<SignUpForm />\n  </div>\n);\n\nconst INITIAL_STATE = {\n  username: '',\n  email: '',\n  passwordOne: '',\n  passwordTwo: '',\n  isAdmin: false,\n  error: null,\n};\n\nconst ERROR_CODE_ACCOUNT_EXISTS = 'auth/email-already-in-use';\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n`;\n\nclass SignUpFormBase extends Component {\n  constructor(props) {\n\tsuper(props);\n\n\tthis.state = { ...INITIAL_STATE };\n  }\n\n  onSubmit = event => {\n\tconst { username, email, passwordOne, isAdmin } = this.state;\n\tconst roles = {};\n\n\n\taxios.post(URL.url + '/api/users', {\n\t\tname: username,\n\t\temail: email,\n\t\tpassword: passwordOne,\n\n\t})\n\t.then(function (response) {\n\t\tconsole.log(response);\n\t})\n\t.catch(function (error) {\n\t\tconsole.log(error);\n\t});\n\n\tthis.props.firebase\n\t  .doCreateUserWithEmailAndPassword(email, passwordOne)\n\t  .then(authUser => {\n\t\t// Create a user in your Firebase realtime database\n\t\treturn this.props.firebase.user(authUser.user.uid).set({\n\t\t  username,\n\t\t  email,\n\t\t  roles,\n\t\t});\n\t  })\n\t  .then(() => {\n\t\treturn this.props.firebase.doSendEmailVerification();\n\t  })\n\t  .then(() => {\n\t\tthis.setState({ ...INITIAL_STATE });\n\t\tthis.props.history.push(\"/\");\n\t  })\n\t  .catch(error => {\n\t\tif (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n\t\t  error.message = ERROR_MSG_ACCOUNT_EXISTS;\n\t\t}\n\n\t\tthis.setState({ error });\n\t  });\n\n\tevent.preventDefault();\n\n\n\t\n  };\n\n  onChange = event => {\n\tthis.setState({ [event.target.name]: event.target.value });\n  };\n\n  render() {\n\tconst {\n\t  username,\n\t  email,\n\t  passwordOne,\n\t  passwordTwo,\n\t  isAdmin,\n\t  error,\n\t} = this.state;\n\n\tconst isInvalid =\n\t  passwordOne !== passwordTwo ||\n\t  passwordOne === '' ||\n\t  email === '' ||\n\t  username === '';\n\n\treturn (\n\t  <Form onSubmit={this.onSubmit} class=\"form\">\n\t\t<h1>SignUp</h1>\n\t\t<input\n\t\t  name=\"username\"\n\t\t  value={username}\n\t\t  onChange={this.onChange}\n\t\t  type=\"text\"\n\t\t  placeholder=\"Full Name\"\n\t\t/>\n\t\t<br/>\n\t\t<br/>        \n\t\t<input\n\t\t  name=\"email\"\n\t\t  value={email}\n\t\t  onChange={this.onChange}\n\t\t  type=\"text\"\n\t\t  placeholder=\"Email Address\"\n\t\t/>\n\t\t<br/>\n\t\t<br/>\n\t\t<input\n\t\t  name=\"passwordOne\"\n\t\t  value={passwordOne}\n\t\t  onChange={this.onChange}\n\t\t  type=\"password\"\n\t\t  placeholder=\"Password\"\n\t\t/>\n\t\t<br/>\n\t\t<br/>\n\t\t<input\n\t\t  name=\"passwordTwo\"\n\t\t  value={passwordTwo}\n\t\t  onChange={this.onChange}\n\t\t  type=\"password\"\n\t\t  placeholder=\"Confirm Password\"\n\t\t/>\n\t\t<br/>\n\t\t<br/>\n\t\t<Button disabled={isInvalid} type=\"submit\">\n\t\t  Sign Up\n\t\t</Button>\n\t  </Form>\n\t);\n  }\n}\n\nconst SignUpLink = () => (\n  <div class=\"forget\">\n\tDon't have an account? <Link to={ROUTES.SIGN_UP}>Sign Up</Link>\n  </div>\n);\n\nconst SignUpForm = compose(\n  withRouter,\n  withFirebase,\n)(SignUpFormBase);\n\nexport default SignUpPage;\n\nexport { SignUpForm, SignUpLink };\n"]},"metadata":{},"sourceType":"module"}